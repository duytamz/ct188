<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trang yêu thích</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="shortcut icon" href="img/logo_icon.png" type="image/x-icon">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="css.css">
</head>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<header>
  <nav class="navbar navbar-expand-md ">
    <div class="container-fluid">

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">

          <li class="nav-item">
            <a class="active" aria-current="page" href="trangchu.html"><img width="150px" src="img/logo.png" alt=""></a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="trangchu.html">Trang chủ</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Về chúng tôi</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Loại hình du lịch
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Du lịch sinh thái</a></li>
              <li><a class="dropdown-item" href="#">Du lịch văn hóa</a></li>
              <li><a class="dropdown-item" href="#">Checkin GenZ</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Liên hệ</a>
          </li>
        </ul>
        <div class="pages px-3">
          <a href="" class="icon-pages sign-in">ĐĂNG NHẬP</a>
          <a href="" class="icon-pages"><i class="fa-solid fa-heart"></i></a>
          <a href="" class="icon-pages"><i class="fa-solid fa-cart-shopping"></i></a>
        </div>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Tìm kiếm" aria-label="Search">
          <button class="search-btn btn btn-outline" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
        </form>
      </div>
    </div>
  </nav>

</header>
<!-- banner -->
<img src="img/banner_ythich.png" class=" w-100 img-fluid" alt="">
<!-- banner -->


<body>
  <div class="text-center">
    <h3 class="highlight">ĐỊA ĐIỂM YÊU THÍCH CỦA BẠN</h3>
  </div>
  <div id="main" class="container row justify-content-center text-center py-5"></div>
  <script>
    $(document).ready(function () {
      // Lấy id từ URL
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get("id");
      const delete_id = urlParams.get("delete_id");
      // Kiểm tra xem id có tồn tại và không trống
      if (id) {
        // Lấy danh sách ID từ localStorage (nếu có)
        let favoriteIds = JSON.parse(localStorage.getItem("favoriteIds")) || [];

        if (!favoriteIds.includes(id)) {
          favoriteIds.push(id);
          // Lưu lại danh sách ID mới vào localStorage
          localStorage.setItem("favoriteIds", JSON.stringify(favoriteIds));
          alert("Thêm địa điểm yêu thích thành công");
        }
      }
      if (delete_id) {
        let favoriteIds = JSON.parse(localStorage.getItem("favoriteIds")) || [];

        if (favoriteIds.includes(delete_id)) {
          favoriteIds.splice(favoriteIds.indexOf(delete_id), 1);
          localStorage.setItem("favoriteIds", JSON.stringify(favoriteIds));
          alert("Xóa 1 địa điểm khỏi yêu thích thành công");
        }
      }
      // Lấy danh sách ID từ localStorage (nếu có)
      let favoriteIds = JSON.parse(localStorage.getItem("favoriteIds")) || [];

      let globalData; // Đặt tên biến toàn cục khác để tránh xung đột

      fetch("data.json")
        .then((response) => response.json())
        .then((jsonData) => {
          let tbody = $("#main");

          globalData = jsonData;

          globalData.forEach((place) => {
            if (favoriteIds.includes(place.id)) {
              let tr = $("<div>").addClass("col-3 px-2");

              let tr_con = $("<div>").addClass("border border-1 product");

              let img = $("<img>").addClass("img-fluid w-100 ");
              img.attr("src", place.image);
              img.attr("alt", "Ảnh địa điểm");
              tr_con.append(img);

              let content = $('<div>').addClass("content");

              let td_destination = $("<h3>");
              td_destination.text(place.destination);
              content.append(td_destination);

              let td_description = $("<p>");
              td_description.text(place.description);
              content.append(td_description);

              let id = place.id;

              let td_favorite_btn = $(`<a href="yeuthich.html?delete_id=${id}">`);
              td_favorite_btn.html('<i class="fa-solid fa-trash fa-lg"></i>');
              content.append(td_favorite_btn);


              tr_con.append(content);
              tr.append(tr_con);

              tbody.append(tr);
            }
          });
        });

      function xoaLocal() {
        localStorage.clear();
      }
    });
  </script>
</body>


<footer class="footer-with-background">
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-6 col-lg-3">
        <h3>Liên hệ</h3>
        <ul>
          <li><i class="fas fa-map-marker-alt"></i> ABC, Quận XYZ, TP. Can Tho</li>
          <li><i class="fas fa-envelope"></i> dulichcantho@.com</li>
          <li><i class="fas fa-phone"></i> 0328931695</li>
        </ul>
      </div>
      <div class="link col-12 col-md-6 col-lg-3">
        <h3>Liên kết hữu ích</h3>
        <ul>
          <li><a href="#"><i class="fas fa-shield-alt"></i> Chính sách bảo mật</a></li>
          <li><a href="#"><i class="fas fa-book"></i> Điều khoản sử dụng</a></li>
          <li><a href="#"><i class="fas fa-question-circle"></i> FAQ</a></li>
        </ul>
      </div>
      <div class="col-12 col-md-6 col-lg-3">
        <h3>Theo dõi chúng tôi</h3>
        <div class="social-links">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>
      <div class="col-12 col-md-6 col-lg-3">
        <h3>Đăng ký nhận tin</h3>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Đăng ký" aria-label="Search">
          <button class="search-btn btn btn-outline" type="submit"><i class="fa-solid fa-user-plus"></i></button>
        </form>
      </div>
    </div>
  </div>
</footer>

</html>